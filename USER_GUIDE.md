# 他山协会平台 - 用户使用指南

完整的用户使用指南，帮助您充分利用AI智能匹配系统。

---

## 目录

1. [快速上手](#快速上手)
2. [AI匹配系统详解](#ai匹配系统详解)
3. [如何获得更好的匹配](#如何获得更好的匹配)
4. [测试账号使用指南](#测试账号使用指南)
5. [功能演示流程](#功能演示流程)
6. [常见问题解答](#常见问题解答)

---

## 快速上手

### 注册新账号

1. 访问首页 http://localhost:5173
2. 点击"立即注册"
3. 填写基本信息：
   - 用户名（唯一标识）
   - 密码
   - 真实姓名

### 完善个人资料

登录后立即完善个人资料，这是获得精准匹配的关键！

1. 点击导航栏"个人资料"
2. 点击右上角"✏️ 编辑资料"按钮
3. 填写以下关键字段：

**必填字段**（影响匹配质量）：
- ✅ **技能**: 您擅长的技能（如：Python编程、数据分析、实验设计）
- ✅ **兴趣**: 您的研究方向或感兴趣的领域
- ✅ **需求**: 您当前需要什么帮助
- ✅ **期望合作者**: 您希望找到什么背景的人

**可选字段**：
- 培养单位、学历、专业（有助于学科背景匹配）
- 联系方式（方便他人联系）

4. 点击"💾 保存修改"

### 查看AI匹配推荐

1. 点击导航栏"我的匹配"
2. 系统会显示Top 3最佳匹配用户
3. 每个推荐包含：
   - **综合匹配度**（百分比）
   - **Embedding分数**（语义相似度）
   - **LLM分析分数**（深度分析）
   - **详细匹配原因**（3-5条）
   - **合作建议**（2-3条）
   - **潜在项目想法**（1-2个）
4. 点击"🔄 刷新匹配"重新计算

---

## AI匹配系统详解

### 匹配是如何工作的？

系统采用 **Embedding + LLM 混合智能匹配**，包含三个阶段：

```
用户A 查看匹配
    ↓
[阶段1] Embedding快速筛选
    ├→ 读取数据库中的embedding向量
    ├→ 计算语义相似度 (余弦相似度)
    ├→ 排序所有候选用户
    └→ 筛选出Top 10
    ↓
[阶段2] LLM深度分析 (仅Top 10)
    ├→ 调用DeepSeek Chat API
    ├→ 分析技能互补度
    ├→ 生成合作建议
    └→ 提供项目想法
    ↓
[阶段3] 返回最终Top 3
    ├→ 综合评分 (40% Embedding + 60% LLM)
    ├→ 详细匹配原因
    ├→ 合作建议
    └→ 潜在项目
```

### 实时计算机制

- ✅ **每次刷新都会重新计算**：点击"🔄 刷新匹配"实时计算匹配度
- ✅ **AI智能分析**：使用DeepSeek Embedding + Chat API
- ✅ **动态更新**：您或其他用户更新资料后，匹配结果会相应变化

### 匹配算法原理

**阶段1 - Embedding语义匹配**:
```
语义相似度 = 40% × (你的技能 vs 对方需求)      // 你能帮助对方
          + 30% × (你的兴趣 vs 对方兴趣)      // 共同话题
          + 20% × (你的期望 vs 对方技能)      // 对方符合期望
          + 10% × (你的需求 vs 对方技能)      // 对方能帮你
```

**阶段2 - LLM深度分析**:
- 综合评估技能互补度
- 分析学科交叉创新潜力
- 生成具体合作建议
- 提供潜在项目想法

**阶段3 - 综合评分**:
```
最终匹配度 = 40% × Embedding分数 + 60% × LLM分析分数
```

### 匹配度说明

| 匹配度 | 含义 | 建议 |
|--------|------|------|
| 80-100% | 🔥 极高匹配 | 强烈推荐联系，很可能有深度合作机会 |
| 60-79% | ⭐ 高度匹配 | 推荐联系，有较多共同点或互补点 |
| 40-59% | ✓ 中等匹配 | 可以尝试联系，可能有部分合作空间 |
| 20-39% | △ 低度匹配 | 仅在某些维度有关联 |
| 10-19% | ○ 弱匹配 | 关联性较低，但仍有可能合作 |
| <10% | · 极弱 | 建议完善资料以提高匹配度 |

### 为什么我看不到匹配？

**常见原因**:

1. **个人资料不完整** ⚠️
   - 未填写技能、兴趣、需求等关键字段
   - **解决方法**：点击"个人资料" → "编辑资料"，完善所有信息

2. **系统中用户太少**
   - 如果系统只有您一个用户，自然无法匹配
   - **解决方法**：运行测试数据 `node backend/seed-enhanced-data.js`

3. **与其他用户相似度太低**
   - 填写了资料但与其他用户完全不相关
   - **解决方法**：扩展兴趣和技能描述

---

## 如何获得更好的匹配

### 1. 使用具体描述

❌ **不好的例子**：
```
技能：编程
兴趣：科研
需求：帮助
```

✅ **好的例子**：
```
技能：Python编程 PyTorch深度学习 数据可视化 统计分析
兴趣：计算机视觉 医学图像处理 跨学科研究
需求：生物信息学数据 临床医学背景合作者
期望合作者：生物医学工程 临床医学 生物信息学专业人士
```

### 2. 使用关键词而非句子

✅ **推荐格式**（关键词用空格分隔）：
```
技能：Python PyTorch 机器学习 数据分析 可视化
兴趣：深度学习 自然语言处理 计算机视觉 强化学习
```

❌ **不推荐格式**（但也能工作）：
```
技能：我擅长使用Python进行数据分析，也会使用PyTorch训练深度学习模型。
```

### 3. 体现互补性

算法会匹配**互补的用户**：
- 您的技能 = 对方的需求 → 您可以帮助对方
- 您的需求 = 对方的技能 → 对方可以帮助您

**示例**：
```
用户A:
  技能: Python编程 机器学习
  需求: 生物实验数据 基因分析

用户B:
  技能: 生物实验 RNA测序 基因编辑
  需求: Python数据分析 机器学习算法

结果: A和B高度匹配！(技能互补，75-85%匹配度)
```

### 4. 定期更新资料

- 研究方向变化时及时更新
- 学会新技能后添加到技能列表
- 完成项目后更新需求

---

## 测试账号使用指南

系统提供了21个测试用户，包括**6对高匹配度用户**，所有账号密码都是 `password123`

### 高匹配度用户对详解

#### 对1: AI研究员 ↔ 医学影像医生
**预期匹配度: 75-85%**

| 用户 | 专业 | 技能 | 需求 |
|------|------|------|------|
| **ai_researcher** | 计算机科学 | Python, PyTorch, 医学AI, CNN, 图像分割 | 医学影像数据, 临床病例, 医学专业指导 |
| **medical_doctor** | 医学影像学 | 医学影像诊断, DICOM, 影像标注, 临床诊断 | AI算法开发, 深度学习模型, Python编程 |

**测试方法**:
```bash
1. 用 ai_researcher 登录（密码：password123）
2. 点击"我的匹配"
3. 应看到 Dr. Wang (medical_doctor) 排第一，匹配度 75%+
4. 查看详细的匹配原因、合作建议、项目想法
```

---

#### 对2: 前端开发 ↔ UI设计师
**预期匹配度: 70-80%**

| 用户 | 专业 | 技能 | 需求 |
|------|------|------|------|
| **frontend_dev** | 软件工程 | React, Vue.js, JavaScript, TypeScript, HTML/CSS | UI设计方案, 用户体验优化, 视觉设计指导 |
| **ui_designer** | 交互设计 | Figma, Sketch, 原型设计, 用户研究 | 前端实现, React开发, CSS动画, 交互效果编程 |

---

#### 对3: 数据科学家 ↔ 商业分析师
**预期匹配度: 65-75%**

| 用户 | 专业 | 技能 | 需求 |
|------|------|------|------|
| **data_scientist** | 统计学 | Python, R, 机器学习, 统计建模, A/B测试 | 商业场景, 真实数据集, 业务需求分析 |
| **business_analyst** | 市场营销 | Excel, Tableau, 市场调研, 用户画像 | 数据建模, 机器学习算法, Python |

---

#### 对4: NLP工程师 ↔ 语言学家
**预期匹配度: 70-80%**

| 用户 | 专业 | 技能 | 需求 |
|------|------|------|------|
| **nlp_engineer** | 计算机科学 | Python, NLP, Transformers, BERT, GPT | 语言学理论, 语料标注, 语法分析 |
| **linguist** | 语言学 | 语言分析, 语料标注, 语法理论, 翻译理论 | NLP工具, 文本挖掘, 自动标注 |

---

#### 对5: 机器人工程师 ↔ 计算机视觉研究者
**预期匹配度: 75-85%**

| 用户 | 专业 | 技能 | 需求 |
|------|------|------|------|
| **robotics_engineer** | 机械工程 | ROS, C++, 机械设计, 控制算法, 传感器融合 | 计算机视觉算法, 深度学习感知, SLAM |
| **cv_researcher** | 计算机视觉 | Python, OpenCV, YOLO, SLAM, 3D重建 | 机器人平台, 硬件测试环境, 工程实现 |

---

#### 对6: 量化交易员 ↔ C++开发者
**预期匹配度: 68-78%**

| 用户 | 专业 | 技能 | 需求 |
|------|------|------|------|
| **quant_trader** | 金融工程 | Python量化, 回测框架, 金融数学, 统计套利 | 高频交易系统, C++开发, 低延迟编程 |
| **cpp_developer** | 计算机科学 | C++, 多线程, 内存优化, 算法设计 | 实际应用场景, 金融领域知识 |

---

### 完整测试账号列表

系统中共有21个用户，以下是所有测试账号：

**高匹配组（12个）**:
1. ai_researcher (180分) - AI医学交叉
2. medical_doctor (160分) - 医学影像
3. frontend_dev (140分) - 前端开发
4. ui_designer (130分) - UI设计
5. data_scientist (170分) - 数据科学
6. business_analyst (150分) - 商业分析
7. nlp_engineer (190分) - 自然语言处理
8. linguist (165分) - 语言学
9. robotics_engineer (175分) - 机器人工程
10. cv_researcher (185分) - 计算机视觉
11. quant_trader (195分) - 量化交易
12. cpp_developer (155分) - C++开发

**原有用户（9个）**:
13. zhangsan (150分) - 计算机科学
14. lisi (80分) - 生物信息学
15. wangwu (120分) - 物理学
16. zhaoliu (60分) - 经济学
17. sunqi (90分) - 材料科学
18. zhouba (200分) - 人工智能
19. wujiu (45分) - 心理学
20. zhengshi (110分) - 遥感科学

---

## 功能演示流程

### 场景1: 新用户完整流程

1. **注册账号**
   - 访问首页，点击"立即注册"
   - 填写用户名、密码、姓名

2. **完善资料**
   - 登录后点击"个人资料" → "编辑资料"
   - 详细填写技能、兴趣、需求、期望合作者
   - **提示**: 信息越详细，AI匹配效果越好

3. **查看匹配推荐**
   - 点击"我的匹配"
   - 系统显示Top 3最佳匹配
   - 每个推荐包含匹配度、原因、建议、项目想法

4. **发布问题**
   - 点击"发布问题"
   - 填写问题标题、详细描述
   - 说明所需技能
   - 设置积分奖励

5. **接取任务**
   - 浏览"问题广场"
   - 找到自己能解决的问题
   - 点击"接取任务"
   - 解决问题后等待发布者确认

6. **查看排行榜**
   - 查看积分最高的用户
   - 了解社区最活跃的贡献者

---

### 场景2: 测试高匹配功能

**推荐测试路径**:

1. **用 ai_researcher 登录**
   ```
   用户名: ai_researcher
   密码: password123
   ```

2. **查看匹配推荐**
   - 点击"我的匹配"
   - 应看到 Dr. Wang (medical_doctor) 排第一
   - 匹配度: 75-85%
   - 查看详细匹配原因（3-5条）
   - 查看合作建议（2-3条）
   - 查看潜在项目（1-2个）

3. **查看对方资料**
   - 查看Dr. Wang的完整资料
   - 了解对方的技能、兴趣、需求

4. **互动测试**
   - 浏览"问题广场"
   - 可以看到Dr. Wang发布的问题
   - 接取问题进行测试

5. **反向验证**
   - 登出后用 medical_doctor 登录
   - 查看匹配，应该看到 Alex Chen (ai_researcher)
   - 验证双向高匹配

---

### 场景3: 资料更新测试

1. **初始状态**
   - 用测试账号登录
   - 查看当前匹配结果

2. **修改资料**
   - 点击"个人资料" → "编辑资料"
   - 修改技能或兴趣描述
   - 保存修改

3. **刷新匹配**
   - 返回"我的匹配"
   - 点击"🔄 刷新匹配"
   - 观察匹配度变化

4. **理解影响**
   - 分析哪些关键词提高了匹配度
   - 理解算法如何工作

---

## 常见问题解答

### Q: 匹配结果会保存吗？
A: 不会。每次点击"刷新匹配"都会重新实时计算。这确保您总是看到基于最新资料的匹配结果。

### Q: 为什么同一个人的匹配度变了？
A: 可能是您或对方更新了个人资料，导致相似度重新计算。这是正常的，表示系统在动态追踪最新信息。

### Q: 我能隐藏某些用户吗？
A: 目前不支持，但匹配度极低的用户会自动排在后面，您可以专注于Top 3推荐。

### Q: 匹配算法会学习吗？
A: 当前版本使用固定的混合算法（Embedding + LLM），未来可能引入机器学习优化和用户反馈学习机制。

### Q: 为什么叫"AI匹配"？
A: 系统使用了DeepSeek Embedding（语义向量）和DeepSeek Chat（大语言模型）进行智能分析，能理解同义词和专业术语关系，而不是简单的关键词匹配。

### Q: 如何提高匹配准确度？
A:
1. 详细填写技能、兴趣、需求字段
2. 使用关键词而非长句子
3. 体现您的优势和需求
4. 定期更新资料
5. 使用具体的专业术语

### Q: 匹配度多少算好？
A:
- 60%以上：强烈推荐联系
- 40-59%：可以尝试联系
- 20-39%：有部分关联，可能有合作机会
- <20%：建议完善资料或寻找其他匹配

### Q: LLM分析失败怎么办？
A: 系统有智能降级机制：
```
Level 1: Embedding + LLM (最佳)
    ↓ (LLM失败)
Level 2: 仅Embedding分析
    ↓ (Embedding失败)
Level 3: 基础关键词算法 (保底)
```
您始终能看到匹配结果，只是详细程度不同。

### Q: 为什么只显示Top 3？
A: 为了让您专注于最佳匹配，避免信息过载。Top 3都是经过LLM深度分析的高质量推荐。

### Q: 可以看到所有匹配用户吗？
A: 目前系统返回Top 3，如需查看更多，可以调整后端配置（`finalTopN`参数）。

---

## 高级技巧

### 1. 利用高积分优势
- 积分>100的用户发布的问题会优先显示
- 问题推荐时获得额外加成
- 多帮助他人解决问题以提高积分

### 2. 组合策略
```
策略1: 互补型合作
  - 强调您的技能和对方可能的需求
  - 适合：技术支持、方法咨询

策略2: 共同兴趣型
  - 强调共同的研究兴趣
  - 适合：联合研究、头脑风暴

策略3: 学科交叉型
  - 强调不同专业背景的碰撞
  - 适合：创新项目、跨学科研究
```

### 3. 匹配原因分析
系统自动生成的匹配原因可以帮助您：
- 了解双方合作的切入点
- 主动联系时引用匹配原因
- 调整资料以获得更精准的匹配

---

## 故障排除

### 问题1: Embedding生成失败
```
错误: [Embedding] 生成失败: Request failed

解决:
1. 检查API key是否正确
2. 检查网络连接
3. 查看DeepSeek API配额
4. 系统会自动降级到基础算法
```

### 问题2: LLM分析超时
```
错误: [LLM] 分析失败: timeout of 15000ms exceeded

解决:
1. 刷新页面重试
2. 系统会使用Embedding结果
3. 查看后端日志了解详情
```

### 问题3: 看不到匹配用户
```
原因: 系统中没有其他用户

解决:
cd backend
node seed-enhanced-data.js
```

---

## 反馈与支持

如有任何问题、建议或发现bug，欢迎通过GitHub Issues反馈。

---

**提示**: 阅读完本指南后，建议先使用测试账号体验功能，再用自己的账号进行实际使用。

**更新日期**: 2026-01-04
