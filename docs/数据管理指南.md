# æ•°æ®ç®¡ç†æŒ‡å—

## ğŸ“ æ•°æ®å­˜å‚¨ä½ç½®

ç”¨æˆ·æ•°æ®å­˜å‚¨åœ¨ **SQLite æ•°æ®åº“**ä¸­ï¼š
- æ–‡ä»¶ä½ç½®ï¼š`tashan-nexus/backend/database.sqlite`
- é…ç½®ä½ç½®ï¼š`tashan-nexus/backend/.env` ä¸­çš„ `DATABASE_PATH` å˜é‡

## ğŸ”’ Git ç‰ˆæœ¬æ§åˆ¶ä¿æŠ¤

æ•°æ®åº“æ–‡ä»¶**å·²ç»è¢« .gitignore ä¿æŠ¤**ï¼Œä¸ä¼šè¢«æäº¤åˆ° GitHubï¼š

```
# .gitignore ä¸­çš„é…ç½®
backend/database.sqlite
backend/*.sqlite
.env
```

è¿™æ„å‘³ç€ï¼š
- âœ… æ¨é€åˆ° GitHub æ—¶ï¼Œæ•°æ®åº“æ–‡ä»¶ä¸ä¼šè¢«ä¸Šä¼ 
- âœ… API å¯†é’¥ç­‰æ•æ„Ÿä¿¡æ¯ï¼ˆ.envï¼‰ä¹Ÿå—ä¿æŠ¤
- âœ… æ¯ä¸ªå¼€å‘ç¯å¢ƒæœ‰ç‹¬ç«‹çš„æ•°æ®åº“

## ğŸ› ï¸ æ•°æ®ç®¡ç†å·¥å…·

æˆ‘ä»¬æä¾›äº† `manage-data.js` è„šæœ¬æ¥ç®¡ç†æ•°æ®ï¼š

```bash
cd backend
node manage-data.js <å‘½ä»¤>
```

### å¸¸ç”¨å‘½ä»¤

#### æŸ¥çœ‹æ•°æ®çŠ¶æ€
```bash
node manage-data.js status          # æŸ¥çœ‹æ•°æ®åº“ç»Ÿè®¡ä¿¡æ¯
node manage-data.js list-users      # åˆ—å‡ºæ‰€æœ‰ç”¨æˆ·
```

#### æ¸…ç†æµ‹è¯•æ•°æ®
```bash
node manage-data.js clear-test      # åˆ é™¤æ¨¡æ‹Ÿ/æµ‹è¯•ç”¨æˆ·
node manage-data.js clear-all       # æ¸…ç©ºæ‰€æœ‰ç”¨æˆ·æ•°æ®
```

#### å¤‡ä»½å’Œå¯¼å‡º
```bash
node manage-data.js backup          # å¤‡ä»½æ•°æ®åº“æ–‡ä»¶
node manage-data.js export          # å¯¼å‡ºç”¨æˆ·æ•°æ®ä¸ºJSON
```

#### å®Œå…¨åˆ é™¤
```bash
node manage-data.js delete-db       # åˆ é™¤æ•°æ®åº“æ–‡ä»¶
```

## ğŸ“¦ ä¸åŒåœºæ™¯çš„æ•°æ®å¤„ç†

### åœºæ™¯ 1ï¼šä¸Šä¼ åˆ° GitHub
```bash
# 1. ç¡®è®¤ .gitignore é…ç½®æ­£ç¡®ï¼ˆå·²é…ç½®å¥½ï¼‰
cat .gitignore | grep database.sqlite

# 2. æäº¤ä»£ç ï¼ˆæ•°æ®åº“ä¼šè¢«è‡ªåŠ¨å¿½ç•¥ï¼‰
git add .
git commit -m "æ›´æ–°ä»£ç "
git push
```

**ç»“æœ**ï¼šåªæœ‰ä»£ç è¢«ä¸Šä¼ ï¼Œæ•°æ®åº“æ–‡ä»¶ç•™åœ¨æœ¬åœ°

---

### åœºæ™¯ 2ï¼šéƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼ˆä¿ç•™æ•°æ®ï¼‰

#### æ–¹æ¡ˆ Aï¼šå¤‡ä»½åè¿ç§»
```bash
# 1. åœ¨æœ¬åœ°å¤‡ä»½æ•°æ®åº“
cd backend
node manage-data.js backup

# 2. å°†å¤‡ä»½æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨
scp database.backup.*.sqlite user@server:/path/to/backend/

# 3. åœ¨æœåŠ¡å™¨ä¸Šé‡å‘½å
ssh user@server
cd /path/to/backend
mv database.backup.*.sqlite database.sqlite
```

#### æ–¹æ¡ˆ Bï¼šå¯¼å‡ºåé‡æ–°å¯¼å…¥
```bash
# 1. å¯¼å‡ºç”¨æˆ·æ•°æ®
node manage-data.js export

# 2. ä¸Šä¼ JSONæ–‡ä»¶åˆ°æœåŠ¡å™¨
scp users.export.*.json user@server:/path/to/backend/

# 3. åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºå¯¼å…¥è„šæœ¬ï¼ˆéœ€è¦å¦å¤–ç¼–å†™ï¼‰
```

---

### åœºæ™¯ 3ï¼šéƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼ˆå…¨æ–°å¼€å§‹ï¼‰
```bash
# 1. æäº¤ä»£ç åˆ° GitHub
git push

# 2. åœ¨æœåŠ¡å™¨ä¸Šå…‹éš†ä»£ç 
git clone https://github.com/your-repo/TashanNexus.git

# 3. æ•°æ®åº“ä¼šè‡ªåŠ¨åˆ›å»ºï¼ˆç¬¬ä¸€æ¬¡å¯åŠ¨æœåŠ¡å™¨æ—¶ï¼‰
cd tashan-nexus/backend
npm install
node server.js

# 4. ï¼ˆå¯é€‰ï¼‰æ·»åŠ æµ‹è¯•æ•°æ®
node seed-data.js
```

**ç»“æœ**ï¼šæœåŠ¡å™¨ä¸Šæœ‰å…¨æ–°çš„ç©ºæ•°æ®åº“

---

### åœºæ™¯ 4ï¼šç‰ˆæœ¬è¿­ä»£ï¼ˆä¿ç•™ç°æœ‰æ•°æ®ï¼‰
```bash
# åœ¨æœåŠ¡å™¨ä¸Šï¼š
# 1. å¤‡ä»½å½“å‰æ•°æ®åº“
node manage-data.js backup

# 2. æ‹‰å–æœ€æ–°ä»£ç 
git pull

# 3. é‡å¯æœåŠ¡
pm2 restart tashan-nexus  # æˆ– node server.js

# æ•°æ®åº“ä¼šè‡ªåŠ¨è¿ç§»ï¼ˆdatabase.js æœ‰è‡ªåŠ¨æ·»åŠ æ–°å­—æ®µçš„é€»è¾‘ï¼‰
```

---

### åœºæ™¯ 5ï¼šæ¸…ç†æ‰€æœ‰æ¨¡æ‹Ÿæ•°æ®
```bash
# åˆ é™¤æµ‹è¯•ç”¨æˆ·ï¼ˆä¿ç•™çœŸå®ç”¨æˆ·ï¼‰
node manage-data.js clear-test

# æˆ–å®Œå…¨æ¸…ç©ºï¼ˆé‡æ–°å¼€å§‹ï¼‰
node manage-data.js clear-all
```

---

## ğŸ”„ æ•°æ®è¿ç§»æœ€ä½³å®è·µ

### å¼€å‘ç¯å¢ƒ
- âœ… ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®è¿›è¡Œæµ‹è¯•
- âœ… å®šæœŸæ¸…ç†æµ‹è¯•æ•°æ®
- âœ… ä¸è¦å°†æ•°æ®åº“æäº¤åˆ° Git

### ç”Ÿäº§ç¯å¢ƒ
- âœ… éƒ¨ç½²å‰å¤‡ä»½æ•°æ®åº“
- âœ… ä½¿ç”¨ç¯å¢ƒå˜é‡é…ç½®æ•°æ®åº“è·¯å¾„
- âœ… å®šæœŸå¤‡ä»½ç”Ÿäº§æ•°æ®
- âœ… è€ƒè™‘è¿ç§»åˆ° PostgreSQL/MySQLï¼ˆæœªæ¥æ‰©å±•ï¼‰

## ğŸ“ æ•°æ®åº“ç»“æ„

å½“å‰ä½¿ç”¨ SQLiteï¼Œä¸»è¦è¡¨ï¼š
- `users` - ç”¨æˆ·ä¿¡æ¯è¡¨
  - åŸºæœ¬ä¿¡æ¯ï¼šusername, name, institution, major
  - åŒ¹é…å­—æ®µï¼šskills, interests, needs, looking_for
  - AI å­—æ®µï¼šskills_embedding, interests_embedding ç­‰
  - å…¶ä»–ï¼špoints, created_at ç­‰

## âš ï¸ é‡è¦æé†’

### æ•æ„Ÿä¿¡æ¯ä¿æŠ¤
ç¡®ä¿ä»¥ä¸‹æ–‡ä»¶**æ°¸è¿œä¸è¦**æäº¤åˆ° Gitï¼š
- âœ… `backend/database.sqlite` - åŒ…å«ç”¨æˆ·æ•°æ®
- âœ… `backend/.env` - åŒ…å« API å¯†é’¥
- âœ… `backend/*.backup.sqlite` - å¤‡ä»½æ–‡ä»¶

### å¤‡ä»½å»ºè®®
- ğŸ“… ç”Ÿäº§ç¯å¢ƒï¼šæ¯å¤©è‡ªåŠ¨å¤‡ä»½
- ğŸ”’ å¤‡ä»½åŠ å¯†ï¼šåŒ…å«æ•æ„Ÿä¿¡æ¯çš„å¤‡ä»½åº”åŠ å¯†
- â˜ï¸  å¼‚åœ°å¤‡ä»½ï¼šå°†å¤‡ä»½å­˜å‚¨åœ¨ä¸åŒä½ç½®

## ğŸš€ æœªæ¥æ‰©å±•

å½“ç”¨æˆ·é‡å¢å¤§æ—¶ï¼Œè€ƒè™‘ï¼š
1. è¿ç§»åˆ° PostgreSQL æˆ– MySQL
2. ä½¿ç”¨ ORMï¼ˆå¦‚ Prismaã€Sequelizeï¼‰
3. å®ç°æ•°æ®åº“ç‰ˆæœ¬ç®¡ç†ï¼ˆmigrationsï¼‰
4. æ·»åŠ è‡ªåŠ¨å¤‡ä»½è„šæœ¬
